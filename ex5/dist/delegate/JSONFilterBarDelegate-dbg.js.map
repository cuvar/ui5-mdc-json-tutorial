{"version":3,"file":"JSONFilterBarDelegate-dbg.js","names":["JSONPropertyInfo","_interopRequireDefault","__JSONPropertyInfo","JSONBaseDelegate","__JSONBaseDelegate","JSONFilterBarDelegate","Object","assign","FilterBarDelegate","fetchProperties","_createValueHelp","oFilterBar","sPropertyName","sPath","oValueHelp","Fragment","load","name","getPayload","valueHelp","addDependent","_createFilterField","sId","oProperty","oFilterField","FilterField","dataType","conditions","propertyKey","required","label","maxConditions","delegate","payload","aDependents","getDependents","find","oD","getId","includes","setValueHelp","addItem","oPI","Element","getElementById"],"sources":["JSONFilterBarDelegate.ts"],"sourcesContent":["import FilterBarDelegate from \"sap/ui/mdc/FilterBarDelegate\"\nimport JSONPropertyInfo from \"mdc/tutorial/model/metadata/JSONPropertyInfo\"\nimport FilterField from \"sap/ui/mdc/FilterField\"\nimport Element from \"sap/ui/core/Element\"\nimport {default as FilterBar, PropertyInfo as FilterBarPropertyInfo} from \"sap/ui/mdc/FilterBar\"\nimport Fragment from \"sap/ui/core/Fragment\"\nimport ValueHelp from \"sap/ui/mdc/ValueHelp\"\nimport JSONBaseDelegate from \"./JSONBaseDelegate\"\n\ninterface FilterBarPayload {\n\tvalueHelp: {\n\t\t[key:string]: string\n\t}\n}\n\nvar JSONFilterBarDelegate = Object.assign({}, FilterBarDelegate, JSONBaseDelegate)\n\nJSONFilterBarDelegate.fetchProperties = async () => JSONPropertyInfo\n\nconst _createValueHelp = async (oFilterBar:FilterBar, sPropertyName:string) => {\n\tconst sPath = \"mdc.tutorial.view.fragment.\"\n\tconst oValueHelp = await Fragment.load({\n\t\tname: sPath + (oFilterBar.getPayload() as FilterBarPayload).valueHelp[sPropertyName]\n\t}) as unknown as ValueHelp\n\toFilterBar.addDependent(oValueHelp)\n\treturn oValueHelp\n}\n\nconst _createFilterField = async (sId:string, oProperty:FilterBarPropertyInfo, oFilterBar:FilterBar) => {\n\tconst sPropertyName = oProperty.name\n\tconst oFilterField = new FilterField(sId, {\n\t\tdataType: oProperty.dataType,\n\t\tconditions: `{$filters>/conditions/${sPropertyName}}`,\n\t\tpropertyKey: sPropertyName,\n\t\trequired: oProperty.required,\n\t\tlabel: oProperty.label,\n\t\tmaxConditions: oProperty.maxConditions,\n\t\tdelegate: {name: \"sap/ui/mdc/field/FieldBaseDelegate\", payload: {}}\n\t})\n\tif ((oFilterBar.getPayload() as FilterBarPayload).valueHelp[sPropertyName] ) {\n\t\tconst aDependents = oFilterBar.getDependents()\n\t\tlet oValueHelp = aDependents.find((oD) => oD.getId().includes(sPropertyName)) as ValueHelp\n\t\toValueHelp ??= await _createValueHelp(oFilterBar, sPropertyName)\n\t\toFilterField.setValueHelp(oValueHelp)\n\t}\n\treturn oFilterField\n}\n\nJSONFilterBarDelegate.addItem = async (oFilterBar:FilterBar, sPropertyName:string) => {\n\tconst oProperty = JSONPropertyInfo.find((oPI) => oPI.name === sPropertyName) as FilterBarPropertyInfo\n\tconst sId = `${oFilterBar.getId()}--filter--${sPropertyName}`\n\treturn Element.getElementById(sId) ?? await _createFilterField(sId, oProperty, oFilterBar)\n}\n\nexport default JSONFilterBarDelegate"],"mappings":";;;;;;;;QACOA,gBAAgB,GAAAC,sBAAA,CAAAC,kBAAA;EAAA,MAMhBC,gBAAgB,GAAAF,sBAAA,CAAAG,kBAAA;EAQvB,IAAIC,qBAAqB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,iBAAiB,EAAEL,gBAAgB,CAAC;EAElFE,qBAAqB,CAACI,eAAe,GAAG,YAAYT,gBAAgB;EAEpE,MAAMU,gBAAgB,GAAG,MAAAA,CAAOC,UAAoB,EAAEC,aAAoB,KAAK;IAC9E,MAAMC,KAAK,GAAG,6BAA6B;IAC3C,MAAMC,UAAU,GAAG,MAAMC,QAAQ,CAACC,IAAI,CAAC;MACtCC,IAAI,EAAEJ,KAAK,GAAIF,UAAU,CAACO,UAAU,CAAC,CAAC,CAAsBC,SAAS,CAACP,aAAa;IACpF,CAAC,CAAyB;IAC1BD,UAAU,CAACS,YAAY,CAACN,UAAU,CAAC;IACnC,OAAOA,UAAU;EAClB,CAAC;EAED,MAAMO,kBAAkB,GAAG,MAAAA,CAAOC,GAAU,EAAEC,SAA+B,EAAEZ,UAAoB,KAAK;IACvG,MAAMC,aAAa,GAAGW,SAAS,CAACN,IAAI;IACpC,MAAMO,YAAY,GAAG,IAAIC,WAAW,CAACH,GAAG,EAAE;MACzCI,QAAQ,EAAEH,SAAS,CAACG,QAAQ;MAC5BC,UAAU,EAAG,yBAAwBf,aAAc,GAAE;MACrDgB,WAAW,EAAEhB,aAAa;MAC1BiB,QAAQ,EAAEN,SAAS,CAACM,QAAQ;MAC5BC,KAAK,EAAEP,SAAS,CAACO,KAAK;MACtBC,aAAa,EAAER,SAAS,CAACQ,aAAa;MACtCC,QAAQ,EAAE;QAACf,IAAI,EAAE,oCAAoC;QAAEgB,OAAO,EAAE,CAAC;MAAC;IACnE,CAAC,CAAC;IACF,IAAKtB,UAAU,CAACO,UAAU,CAAC,CAAC,CAAsBC,SAAS,CAACP,aAAa,CAAC,EAAG;MAC5E,MAAMsB,WAAW,GAAGvB,UAAU,CAACwB,aAAa,CAAC,CAAC;MAC9C,IAAIrB,UAAU,GAAGoB,WAAW,CAACE,IAAI,CAAEC,EAAE,IAAKA,EAAE,CAACC,KAAK,CAAC,CAAC,CAACC,QAAQ,CAAC3B,aAAa,CAAC,CAAc;MAC1FE,UAAU,KAAK,MAAMJ,gBAAgB,CAACC,UAAU,EAAEC,aAAa,CAAC;MAChEY,YAAY,CAACgB,YAAY,CAAC1B,UAAU,CAAC;IACtC;IACA,OAAOU,YAAY;EACpB,CAAC;EAEDnB,qBAAqB,CAACoC,OAAO,GAAG,OAAO9B,UAAoB,EAAEC,aAAoB,KAAK;IACrF,MAAMW,SAAS,GAAGvB,gBAAgB,CAACoC,IAAI,CAAEM,GAAG,IAAKA,GAAG,CAACzB,IAAI,KAAKL,aAAa,CAA0B;IACrG,MAAMU,GAAG,GAAI,GAAEX,UAAU,CAAC2B,KAAK,CAAC,CAAE,aAAY1B,aAAc,EAAC;IAC7D,OAAO+B,OAAO,CAACC,cAAc,CAACtB,GAAG,CAAC,KAAI,MAAMD,kBAAkB,CAACC,GAAG,EAAEC,SAAS,EAAEZ,UAAU,CAAC;EAC3F,CAAC;EAAA,OAEcN,qBAAqB;AAAA"}