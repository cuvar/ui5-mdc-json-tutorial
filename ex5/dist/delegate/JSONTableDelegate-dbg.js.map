{"version":3,"file":"JSONTableDelegate-dbg.js","names":["JSONPropertyInfo","_interopRequireDefault","__JSONPropertyInfo","JSONBaseDelegate","__JSONBaseDelegate","JSONTableDelegate","Object","assign","TableDelegate","fetchProperties","filter","oPI","name","_createColumn","oPropertyInfo","oTable","sName","sId","getId","Element","getElementById","Column","propertyKey","header","label","template","Text","text","path","type","dataType","addItem","sPropertyName","find","updateBindingInfo","oBindingInfo","call","getPayload","bindingPath","templateShareable","_createSearchFilters","sSearch","aKeys","aFilters","map","aKey","Filter","operator","FilterOperator","Contains","value1","getFilters","getFilter","getSearch","searchKeys","concat"],"sources":["JSONTableDelegate.ts"],"sourcesContent":["import TableDelegate from \"sap/ui/mdc/TableDelegate\"\nimport Text from \"sap/m/Text\"\nimport Element from \"sap/ui/core/Element\"\nimport JSONPropertyInfo from \"mdc/tutorial/model/metadata/JSONPropertyInfo\"\nimport {default as Table, PropertyInfo as TablePropertyInfo} from \"sap/ui/mdc/Table\"\nimport Column from \"sap/ui/mdc/table/Column\"\nimport Filter from \"sap/ui/model/Filter\"\nimport FilterOperator from \"sap/ui/model/FilterOperator\"\nimport FilterBar from \"sap/ui/mdc/FilterBar\"\nimport JSONBaseDelegate from \"./JSONBaseDelegate\"\n\ninterface TablePayload {\n\tbindingPath: string\n\tsearchKeys: string[]\n}\n\nconst JSONTableDelegate = Object.assign({}, TableDelegate, JSONBaseDelegate)\n\nJSONTableDelegate.fetchProperties = async () => {\n\treturn JSONPropertyInfo.filter((oPI) => oPI.name !== \"$search\")\n}\n\nconst _createColumn = (oPropertyInfo:TablePropertyInfo, oTable:Table) => {\n\tconst sName = oPropertyInfo.name\n\tconst sId = oTable.getId() + \"---col-\" + sName\n\treturn Element.getElementById(sId) ?? new Column(sId, {\n\t\tpropertyKey: sName,\n\t\theader: oPropertyInfo.label,\n\t\ttemplate: new Text({\n\t\t\ttext: {\n\t\t\t\tpath: \"mountains>\" + sName,\n\t\t\t\ttype: oPropertyInfo.dataType\n\t\t\t}\n\t\t})\n\t})\n}\n\nJSONTableDelegate.addItem = async (oTable:Table, sPropertyName:string) => {\n\tconst oPropertyInfo = JSONPropertyInfo.find((oPI) => oPI.name === sPropertyName)\n\treturn _createColumn(oPropertyInfo, oTable)\n}\n\nJSONTableDelegate.updateBindingInfo = (oTable, oBindingInfo) => {\n\tTableDelegate.updateBindingInfo.call(JSONTableDelegate, oTable, oBindingInfo)\n\toBindingInfo.path = (oTable.getPayload() as TablePayload).bindingPath\n\toBindingInfo.templateShareable = true\n}\n\nconst _createSearchFilters = (sSearch:string, aKeys:string[]) => {\n\tconst aFilters = aKeys.map((aKey) => new Filter({\n\t\tpath: aKey,\n\t\toperator: FilterOperator.Contains,\n\t\tvalue1: sSearch\n\t}))\n\treturn [new Filter(aFilters, false)]\n}\n\nJSONTableDelegate.getFilters = (oTable) => {\n\tconst sSearch = (Element.getElementById(oTable.getFilter()) as FilterBar).getSearch()\n\tconst aKeys = (oTable.getPayload() as TablePayload).searchKeys\n\tlet aFilters = TableDelegate.getFilters(oTable)\n\tif (sSearch && aKeys) {\n\t\taFilters = aFilters.concat(_createSearchFilters(sSearch, aKeys))\n\t}\n\treturn aFilters\n}\n\nexport default JSONTableDelegate"],"mappings":";;;;;;;;QAGOA,gBAAgB,GAAAC,sBAAA,CAAAC,kBAAA;EAAA,MAMhBC,gBAAgB,GAAAF,sBAAA,CAAAG,kBAAA;EAOvB,MAAMC,iBAAiB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,aAAa,EAAEL,gBAAgB,CAAC;EAE5EE,iBAAiB,CAACI,eAAe,GAAG,YAAY;IAC/C,OAAOT,gBAAgB,CAACU,MAAM,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,KAAK,SAAS,CAAC;EAChE,CAAC;EAED,MAAMC,aAAa,GAAGA,CAACC,aAA+B,EAAEC,MAAY,KAAK;IACxE,MAAMC,KAAK,GAAGF,aAAa,CAACF,IAAI;IAChC,MAAMK,GAAG,GAAGF,MAAM,CAACG,KAAK,CAAC,CAAC,GAAG,SAAS,GAAGF,KAAK;IAC9C,OAAOG,OAAO,CAACC,cAAc,CAACH,GAAG,CAAC,IAAI,IAAII,MAAM,CAACJ,GAAG,EAAE;MACrDK,WAAW,EAAEN,KAAK;MAClBO,MAAM,EAAET,aAAa,CAACU,KAAK;MAC3BC,QAAQ,EAAE,IAAIC,IAAI,CAAC;QAClBC,IAAI,EAAE;UACLC,IAAI,EAAE,YAAY,GAAGZ,KAAK;UAC1Ba,IAAI,EAAEf,aAAa,CAACgB;QACrB;MACD,CAAC;IACF,CAAC,CAAC;EACH,CAAC;EAEDzB,iBAAiB,CAAC0B,OAAO,GAAG,OAAOhB,MAAY,EAAEiB,aAAoB,KAAK;IACzE,MAAMlB,aAAa,GAAGd,gBAAgB,CAACiC,IAAI,CAAEtB,GAAG,IAAKA,GAAG,CAACC,IAAI,KAAKoB,aAAa,CAAC;IAChF,OAAOnB,aAAa,CAACC,aAAa,EAAEC,MAAM,CAAC;EAC5C,CAAC;EAEDV,iBAAiB,CAAC6B,iBAAiB,GAAG,CAACnB,MAAM,EAAEoB,YAAY,KAAK;IAC/D3B,aAAa,CAAC0B,iBAAiB,CAACE,IAAI,CAAC/B,iBAAiB,EAAEU,MAAM,EAAEoB,YAAY,CAAC;IAC7EA,YAAY,CAACP,IAAI,GAAIb,MAAM,CAACsB,UAAU,CAAC,CAAC,CAAkBC,WAAW;IACrEH,YAAY,CAACI,iBAAiB,GAAG,IAAI;EACtC,CAAC;EAED,MAAMC,oBAAoB,GAAGA,CAACC,OAAc,EAAEC,KAAc,KAAK;IAChE,MAAMC,QAAQ,GAAGD,KAAK,CAACE,GAAG,CAAEC,IAAI,IAAK,IAAIC,MAAM,CAAC;MAC/ClB,IAAI,EAAEiB,IAAI;MACVE,QAAQ,EAAEC,cAAc,CAACC,QAAQ;MACjCC,MAAM,EAAET;IACT,CAAC,CAAC,CAAC;IACH,OAAO,CAAC,IAAIK,MAAM,CAACH,QAAQ,EAAE,KAAK,CAAC,CAAC;EACrC,CAAC;EAEDtC,iBAAiB,CAAC8C,UAAU,GAAIpC,MAAM,IAAK;IAC1C,MAAM0B,OAAO,GAAItB,OAAO,CAACC,cAAc,CAACL,MAAM,CAACqC,SAAS,CAAC,CAAC,CAAC,CAAeC,SAAS,CAAC,CAAC;IACrF,MAAMX,KAAK,GAAI3B,MAAM,CAACsB,UAAU,CAAC,CAAC,CAAkBiB,UAAU;IAC9D,IAAIX,QAAQ,GAAGnC,aAAa,CAAC2C,UAAU,CAACpC,MAAM,CAAC;IAC/C,IAAI0B,OAAO,IAAIC,KAAK,EAAE;MACrBC,QAAQ,GAAGA,QAAQ,CAACY,MAAM,CAACf,oBAAoB,CAACC,OAAO,EAAEC,KAAK,CAAC,CAAC;IACjE;IACA,OAAOC,QAAQ;EAChB,CAAC;EAAA,OAEctC,iBAAiB;AAAA"}