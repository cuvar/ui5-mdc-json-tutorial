{"version":3,"file":"JSONFilterBarDelegate.js","names":["JSONPropertyInfo","_interopRequireDefault","__JSONPropertyInfo","JSONFilterBarDelegate","Object","assign","FilterBarDelegate","fetchProperties","async","_createValueHelp","oFilterBar","sPropertyName","sPath","oValueHelp","Fragment","load","name","getPayload","valueHelp","addDependent","_createFilterField","sId","oProperty","oFilterField","FilterField","dataType","conditions","propertyKey","required","label","maxConditions","delegate","payload","aDependents","getDependents","find","oD","getId","includes","setValueHelp","addItem","oPI","Element","getElementById"],"sources":["JSONFilterBarDelegate.ts"],"sourcesContent":["import FilterBarDelegate from \"sap/ui/mdc/FilterBarDelegate\"\nimport JSONPropertyInfo from \"mdc/tutorial/model/metadata/JSONPropertyInfo\"\nimport FilterField from \"sap/ui/mdc/FilterField\"\nimport Element from \"sap/ui/core/Element\"\nimport {default as FilterBar, PropertyInfo as FilterBarPropertyInfo} from \"sap/ui/mdc/FilterBar\"\nimport Fragment from \"sap/ui/core/Fragment\"\nimport ValueHelp from \"sap/ui/mdc/ValueHelp\"\n\ninterface FilterBarPayload {\n\tvalueHelp: {\n\t\t[key:string]: string\n\t}\n}\n\nvar JSONFilterBarDelegate = Object.assign({}, FilterBarDelegate)\n\nJSONFilterBarDelegate.fetchProperties = async () => JSONPropertyInfo\n\nconst _createValueHelp = async (oFilterBar:FilterBar, sPropertyName:string) => {\n\tconst sPath = \"mdc.tutorial.view.fragment.\"\n\tconst oValueHelp = await Fragment.load({\n\t\tname: sPath + (oFilterBar.getPayload() as FilterBarPayload).valueHelp[sPropertyName]\n\t}) as unknown as ValueHelp\n\toFilterBar.addDependent(oValueHelp)\n\treturn oValueHelp\n}\n\nconst _createFilterField = async (sId:string, oProperty:FilterBarPropertyInfo, oFilterBar:FilterBar) => {\n\tconst sPropertyName = oProperty.name\n\tconst oFilterField = new FilterField(sId, {\n\t\tdataType: oProperty.dataType,\n\t\tconditions: `{$filters>/conditions/${sPropertyName}}`,\n\t\tpropertyKey: sPropertyName,\n\t\trequired: oProperty.required,\n\t\tlabel: oProperty.label,\n\t\tmaxConditions: oProperty.maxConditions,\n\t\tdelegate: {name: \"sap/ui/mdc/field/FieldBaseDelegate\", payload: {}}\n\t})\n\tif ((oFilterBar.getPayload() as FilterBarPayload).valueHelp[sPropertyName] ) {\n\t\tconst aDependents = oFilterBar.getDependents()\n\t\tlet oValueHelp = aDependents.find((oD) => oD.getId().includes(sPropertyName)) as ValueHelp\n\t\toValueHelp ??= await _createValueHelp(oFilterBar, sPropertyName)\n\t\toFilterField.setValueHelp(oValueHelp)\n\t}\n\treturn oFilterField\n}\n\nJSONFilterBarDelegate.addItem = async (oFilterBar:FilterBar, sPropertyName:string) => {\n\tconst oProperty = JSONPropertyInfo.find((oPI) => oPI.name === sPropertyName) as FilterBarPropertyInfo\n\tconst sId = `${oFilterBar.getId()}--filter--${sPropertyName}`\n\treturn Element.getElementById(sId) ?? await _createFilterField(sId, oProperty, oFilterBar)\n}\n\nexport default JSONFilterBarDelegate"],"mappings":"ySACOA,EAAgBC,EAAAC,GAavB,IAAIC,EAAwBC,OAAOC,OAAO,CAAC,EAAGC,GAE9CH,EAAsBI,gBAAkBC,SAAYR,EAEpD,MAAMS,EAAmBD,MAAOE,EAAsBC,KACrD,MAAMC,EAAQ,8BACd,MAAMC,QAAmBC,EAASC,KAAK,CACtCC,KAAMJ,EAASF,EAAWO,aAAkCC,UAAUP,KAEvED,EAAWS,aAAaN,GACxB,OAAOA,CAAU,EAGlB,MAAMO,EAAqBZ,MAAOa,EAAYC,EAAiCZ,KAC9E,MAAMC,EAAgBW,EAAUN,KAChC,MAAMO,EAAe,IAAIC,EAAYH,EAAK,CACzCI,SAAUH,EAAUG,SACpBC,WAAa,yBAAwBf,KACrCgB,YAAahB,EACbiB,SAAUN,EAAUM,SACpBC,MAAOP,EAAUO,MACjBC,cAAeR,EAAUQ,cACzBC,SAAU,CAACf,KAAM,qCAAsCgB,QAAS,CAAC,KAElE,GAAKtB,EAAWO,aAAkCC,UAAUP,GAAiB,CAC5E,MAAMsB,EAAcvB,EAAWwB,gBAC/B,IAAIrB,EAAaoB,EAAYE,KAAMC,GAAOA,EAAGC,QAAQC,SAAS3B,IAC9DE,UAAqBJ,EAAiBC,EAAYC,GAClDY,EAAagB,aAAa1B,EAC3B,CACA,OAAOU,CAAY,EAGpBpB,EAAsBqC,QAAUhC,MAAOE,EAAsBC,KAC5D,MAAMW,EAAYtB,EAAiBmC,KAAMM,GAAQA,EAAIzB,OAASL,GAC9D,MAAMU,EAAO,GAAEX,EAAW2B,oBAAoB1B,IAC9C,OAAO+B,EAAQC,eAAetB,UAAcD,EAAmBC,EAAKC,EAAWZ,EAAW,EAC1F,OAEcP,CAAqB"}